function getRoute(e){var a=e.target.id,i=$("#"+a+"-Trait").val()||null,t=$("#"+a+"-Name").val()||null,n=$("#"+a+"-Description").val()||null,o=imgName,r={trait:i,name:t,description:n,image:o,quizId:quizId,removeQuizId:removeQuizId};if(console.log(r),"submitProduct"==a)ajaxData=r,sendData("../uploadImage",new FormData($("#product-upload")[0]),!1,!1);else if(a.includes("submitRanks"))sendData("../submitRanks/"+quizId,new FormData($("#ranking")[0]),!1,!1);else if(a.includes("removeQuiz"))sendData("removeQuiz",r),$("#Quiz-"+removeQuizId).hide("slow");else if(a.includes("removeProduct")||a.includes("removeTrait")){var u=a.split("-"),l=u[0],s=u[1];ajaxData=r,ajaxData.removeId=s,sendData("../"+l+"/"+quizId,ajaxData),$("#"+l.replace("remove","")+"-"+s).hide("slow")}else"newQuiz"==a?sendData("../"+a,r):sendData("../"+a+"/"+quizId,r)}function previewFile(e){var e=document.querySelector("input[type=file]").files[0],a=new FileReader;a.addEventListener("load",function(){imgName=e.name,imgSrc=a.result,$("#image-name").text(imgName),console.log(imgFile)},!1),e&&a.readAsDataURL(e)}function previewProduct(e,a,i,t){$("#products").prepend('<div id="Product-'+t+'" class="w-100 w-46-m w-30-l pa4 bw1 b--solid b--light-gray tc relative product mb3 mh1"><div id="removeProduct-'+t+'" class="submit link blue absolute top-1p right-1 delete-product pointer">x</div><div class="h4"><img src="../uploads/'+i+'" class="max-h4 mt2"/></div><p class="f6">'+e+"</p></div>"),$("#removeProduct-"+t).on("mousedown",function(e){getRoute(e)}),$("#submitProduct-Name").val(null),$("#submitProduct-Description").val(null),$("#image-name").text(null)}function previewTrait(e,a){$("#traits").prepend('<div id="Trait-'+a+'" class="bb bw1 b--light-gray ph2 pt3 pb2 flex justify-between"><span>'+e+'</span><span><a id="removeTrait-'+a+'" href="" class="submit link blue ml1">x</a></span></div>'),$("#Trait-"+a).on("mousedown",function(e){getRoute(e)}),$("#submitTrait-Trait").val(null)}function sendData(e,a,i,t){return null==i&&(i=!0),null==t&&(t="application/x-www-form-urlencoded; charset=UTF-8"),$.ajax({type:"POST",url:e,data:a,contentType:t,processData:i,beforeSend:function(e){var a=$('meta[name="csrf-token"]').attr("content");if(a)return e.setRequestHeader("X-CSRF-TOKEN",a)},success:function(a){a.result;console.log(a),(e.includes("newQuiz")||e.includes("updateQuiz"))&&(window.location.href="../admin-step2/"+a.quizId),e.includes("submitProduct")&&previewProduct(a.name,a.description,a.img,a.prodId),e.includes("submitTrait")&&previewTrait(a.trait,a.traitId),e.includes("uploadImage")&&(ajaxData.image=a.imgName,sendData("../submitProduct",ajaxData))},error:function(e){console.log("Error"),$("body").html(e.responseText),console.log(e)},complete:function(e){console.log("complete")}})}var imgName=null,imgSrc=null,imgFile=null,ajaxData,removeQuizId=0;$(".removeQuiz").on("mousedown",function(e){removeQuizId=e.target.id.replace("removeQuiz-","")});